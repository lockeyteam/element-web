{"version":3,"file":"bundles/b205bf1af9bdedd81a8b/5215.js","mappings":"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","sources":["webpack://element-web/./node_modules/@vector-im/compound-design-tokens/assets/web/icons/mic-on-solid.js","webpack://element-web/./src/components/views/rooms/CollapsibleButton.tsx","webpack://element-web/./node_modules/@vector-im/compound-design-tokens/assets/web/icons/reaction.js","webpack://element-web/./src/components/views/rooms/EmojiButton.tsx","webpack://element-web/./node_modules/@vector-im/compound-design-tokens/assets/web/icons/attachment.js","webpack://element-web/./node_modules/@vector-im/compound-design-tokens/assets/web/icons/text-formatting.js","webpack://element-web/./res/img/element-icons/room/composer/sticker.svg","webpack://element-web/./src/components/views/rooms/MessageComposerButtons.tsx"],"sourcesContent":["import { forwardRef } from \"react\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nfunction MicOnSolidIcon(props, ref) {\n  return /*#__PURE__*/_jsxs(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    viewBox: \"0 0 24 24\",\n    ref: ref,\n    ...props,\n    children: [/*#__PURE__*/_jsx(\"path\", {\n      d: \"M8 6a4 4 0 1 1 8 0v6a4 4 0 0 1-8 0z\"\n    }), /*#__PURE__*/_jsx(\"path\", {\n      d: \"M5 11a1 1 0 0 1 1 1 6 6 0 0 0 12 0 1 1 0 1 1 2 0 8 8 0 0 1-7 7.938V21a1 1 0 1 1-2 0v-1.062A8 8 0 0 1 4 12a1 1 0 0 1 1-1\"\n    })]\n  });\n}\n;\nMicOnSolidIcon.displayName = \"MicOnSolidIcon\";\nexport default forwardRef(MicOnSolidIcon);","/*\nCopyright 2024 New Vector Ltd.\nCopyright 2021 The Matrix.org Foundation C.I.C.\n\nSPDX-License-Identifier: AGPL-3.0-only OR GPL-3.0-only OR LicenseRef-Element-Commercial\nPlease see LICENSE files in the repository root for full details.\n*/\n\nimport React, { type RefObject, useContext } from \"react\";\n\nimport AccessibleButton, { type ButtonProps } from \"../elements/AccessibleButton\";\nimport { OverflowMenuContext } from \"./MessageComposerButtons\";\nimport { IconizedContextMenuOption } from \"../context_menus/IconizedContextMenu\";\n\ninterface Props extends Omit<ButtonProps<\"div\">, \"element\"> {\n    inputRef?: RefObject<HTMLElement | null>;\n    title: string;\n}\n\nexport const CollapsibleButton: React.FC<Props> = ({ title, children, className, inputRef, ...props }) => {\n    const inOverflowMenu = !!useContext(OverflowMenuContext);\n    if (inOverflowMenu) {\n        return <IconizedContextMenuOption {...props} icon={children} label={title} inputRef={inputRef} />;\n    }\n\n    return (\n        <AccessibleButton {...props} title={title} className={className} ref={inputRef}>\n            {children}\n        </AccessibleButton>\n    );\n};\n","import { forwardRef } from \"react\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nfunction ReactionIcon(props, ref) {\n  return /*#__PURE__*/_jsxs(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    viewBox: \"0 0 24 24\",\n    ref: ref,\n    ...props,\n    children: [/*#__PURE__*/_jsx(\"path\", {\n      d: \"M15.536 15.536a1 1 0 0 0-1.415-1.415 3 3 0 0 1-2.12.879 3 3 0 0 1-2.122-.879 1 1 0 1 0-1.414 1.415A5 5 0 0 0 12 17c1.38 0 2.632-.56 3.536-1.464M10 10.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m5.5 1.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3\"\n    }), /*#__PURE__*/_jsx(\"path\", {\n      d: \"M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10m-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0\"\n    })]\n  });\n}\n;\nReactionIcon.displayName = \"ReactionIcon\";\nexport default forwardRef(ReactionIcon);","/*\nCopyright 2024 New Vector Ltd.\nCopyright 2022 The Matrix.org Foundation C.I.C.\n\nSPDX-License-Identifier: AGPL-3.0-only OR GPL-3.0-only OR LicenseRef-Element-Commercial\nPlease see LICENSE files in the repository root for full details.\n*/\n\nimport classNames from \"classnames\";\nimport React, { type JSX, useContext } from \"react\";\nimport { ReactionIcon } from \"@vector-im/compound-design-tokens/assets/web/icons\";\n\nimport { _t } from \"../../../languageHandler\";\nimport ContextMenu, { aboveLeftOf, type MenuProps, useContextMenu } from \"../../structures/ContextMenu\";\nimport EmojiPicker from \"../emojipicker/EmojiPicker\";\nimport { CollapsibleButton } from \"./CollapsibleButton\";\nimport { OverflowMenuContext } from \"./MessageComposerButtons\";\n\ninterface IEmojiButtonProps {\n    addEmoji: (unicode: string) => boolean;\n    menuPosition?: MenuProps;\n    className?: string;\n}\n\nexport function EmojiButton({ addEmoji, menuPosition, className }: IEmojiButtonProps): JSX.Element {\n    const overflowMenuCloser = useContext(OverflowMenuContext);\n    const [menuDisplayed, button, openMenu, closeMenu] = useContextMenu();\n\n    let contextMenu: React.ReactElement | null = null;\n    if (menuDisplayed && button.current) {\n        const position = menuPosition ?? aboveLeftOf(button.current.getBoundingClientRect());\n        const onFinished = (): void => {\n            closeMenu();\n            overflowMenuCloser?.();\n        };\n\n        contextMenu = (\n            <ContextMenu {...position} onFinished={onFinished} managed={false} focusLock>\n                <EmojiPicker onChoose={addEmoji} onFinished={onFinished} />\n            </ContextMenu>\n        );\n    }\n\n    const computedClassName = classNames(\"mx_EmojiButton\", className, {\n        mx_EmojiButton_highlight: menuDisplayed,\n    });\n\n    // TODO: replace ContextMenuTooltipButton with a unified representation of\n    // the header buttons and the right panel buttons\n    return (\n        <>\n            <CollapsibleButton\n                className={computedClassName}\n                onClick={openMenu}\n                title={_t(\"common|emoji\")}\n                inputRef={button}\n            >\n                <ReactionIcon />\n            </CollapsibleButton>\n\n            {contextMenu}\n        </>\n    );\n}\n","import { forwardRef } from \"react\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction AttachmentIcon(props, ref) {\n  return /*#__PURE__*/_jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    viewBox: \"0 0 24 24\",\n    ref: ref,\n    ...props,\n    children: /*#__PURE__*/_jsx(\"path\", {\n      d: \"M11.5 22q-2.3 0-3.9-1.6T6 16.5V6q0-1.65 1.175-2.825T10 2t2.825 1.175T14 6v9.5q0 1.05-.725 1.775T11.5 18t-1.775-.725T9 15.5V6.75A.73.73 0 0 1 9.75 6a.73.73 0 0 1 .75.75v8.75q0 .424.287.712.288.288.713.288.424 0 .713-.288a.97.97 0 0 0 .287-.712V6q0-1.05-.725-1.775T10 3.5t-1.775.725T7.5 6v10.5q0 1.65 1.175 2.825T11.5 20.5t2.825-1.175T15.5 16.5V6.75a.73.73 0 0 1 .75-.75.73.73 0 0 1 .75.75v9.75q0 2.3-1.6 3.9T11.5 22\"\n    })\n  });\n}\n;\nAttachmentIcon.displayName = \"AttachmentIcon\";\nexport default forwardRef(AttachmentIcon);","import { forwardRef } from \"react\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction TextFormattingIcon(props, ref) {\n  return /*#__PURE__*/_jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    viewBox: \"0 0 24 24\",\n    ref: ref,\n    ...props,\n    children: /*#__PURE__*/_jsx(\"path\", {\n      d: \"M6 19a.97.97 0 0 1-.713-.288A.97.97 0 0 1 5 18q0-.424.287-.712A.97.97 0 0 1 6 17h12q.424 0 .712.288.288.287.288.712 0 .424-.288.712A.97.97 0 0 1 18 19zm1.35-5.2 3.425-9.2a.9.9 0 0 1 .338-.437A.93.93 0 0 1 11.65 4h.7q.3 0 .537.162.238.163.338.438l3.425 9.225q.15.425-.1.8a.8.8 0 0 1-.7.375.9.9 0 0 1-.512-.162A.9.9 0 0 1 15 14.4l-.75-2.2H9.8L9 14.425a.84.84 0 0 1-.325.425q-.225.15-.5.15a.84.84 0 0 1-.738-.387.82.82 0 0 1-.087-.813m3-3.2h3.3l-1.6-4.55h-.1z\"\n    })\n  });\n}\n;\nTextFormattingIcon.displayName = \"TextFormattingIcon\";\nexport default forwardRef(TextFormattingIcon);","var _mask, _path, _path2;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nimport { forwardRef } from \"react\";\nvar SvgSticker = function SvgSticker(props, ref) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 20 20\",\n    role: \"presentation\",\n    \"aria-hidden\": true,\n    ref: ref\n  }, props), _mask || (_mask = /*#__PURE__*/React.createElement(\"mask\", {\n    id: \"sticker_svg__a\",\n    fill: \"#fff\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M8.833 19.933C3.86 19.354 0 15.128 0 10 0 4.477 4.477 0 10 0c5.153 0 9.395 3.897 9.94 8.904a1 1 0 0 0-.107-.042c-3.113-1.012-6.594-.385-8.984 2.027-2.385 2.407-3.009 5.908-2.016 9.044m1.89-.655 8.497-8.497c-2.487-.808-5.16-.282-6.96 1.534-1.784 1.8-2.312 4.47-1.538 6.963\",\n    clipRule: \"evenodd\"\n  }))), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#000\",\n    fillRule: \"evenodd\",\n    d: \"M8.833 19.933C3.86 19.354 0 15.128 0 10 0 4.477 4.477 0 10 0c5.153 0 9.395 3.897 9.94 8.904a1 1 0 0 0-.107-.042c-3.113-1.012-6.594-.385-8.984 2.027-2.385 2.407-3.009 5.908-2.016 9.044m1.89-.655 8.497-8.497c-2.487-.808-5.16-.282-6.96 1.534-1.784 1.8-2.312 4.47-1.538 6.963\",\n    clipRule: \"evenodd\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#000\",\n    d: \"m8.833 19.933-.116.99a.997.997 0 0 0 1.067-1.291zM19.94 8.904l-.416.907a.997.997 0 0 0 1.407-1.015zm-.108-.042.308-.948zm-8.984 2.027.708.702zm-.127 8.389-.952.296a.997.997 0 0 0 1.658.409zm8.498-8.497.705.705a.997.997 0 0 0-.397-1.654zm-6.96 1.534.71.702zM-.996 10c0 5.64 4.245 10.287 9.715 10.923l.23-1.981A9.004 9.004 0 0 1 .998 10zM10-.997C3.926-.997-.997 3.926-.997 10H.997A9.003 9.003 0 0 1 10 .997zm10.932 9.793C20.332 3.288 15.667-.997 10-.997V.997a9.004 9.004 0 0 1 8.95 8.015zm-1.407 1.015.831-1.813a2 2 0 0 0-.215-.084zm-7.968 1.78c2.095-2.114 5.17-2.69 7.968-1.78l.616-1.897c-3.429-1.115-7.315-.437-10 2.273zm-1.773 8.04c-.895-2.827-.319-5.929 1.773-8.04l-1.417-1.404C7.463 12.89 6.792 16.79 7.882 20.234zm1.643.352 8.498-8.497-1.41-1.41-8.498 8.497zm8.1-10.151c-2.803-.911-5.882-.332-7.975 1.78l1.417 1.405c1.505-1.519 3.773-1.993 5.942-1.288zm-7.975 1.78c-2.074 2.094-2.652 5.16-1.782 7.961l1.905-.59c-.678-2.185-.2-4.458 1.294-5.966z\",\n    mask: \"url(#sticker_svg__a)\"\n  })));\n};\nvar ForwardRef = /*#__PURE__*/forwardRef(SvgSticker);\nexport { ForwardRef as Icon };\nexport default \"img/element-icons/room/composer/sticker.6a92ae6.svg\";","/*\nCopyright 2024 New Vector Ltd.\nCopyright 2022 The Matrix.org Foundation C.I.C.\n\nSPDX-License-Identifier: AGPL-3.0-only OR GPL-3.0-only OR LicenseRef-Element-Commercial\nPlease see LICENSE files in the repository root for full details.\n*/\n\nimport classNames from \"classnames\";\nimport {\n    type IEventRelation,\n    type Room,\n    type MatrixClient,\n    THREAD_RELATION_TYPE,\n    M_POLL_START,\n} from \"matrix-js-sdk/src/matrix\";\nimport React, { type JSX, createContext, type ReactElement, type ReactNode, useContext, useRef } from \"react\";\nimport {\n    AttachmentIcon,\n    MicOnSolidIcon,\n    OverflowHorizontalIcon,\n    PollsIcon,\n    TextFormattingIcon,\n} from \"@vector-im/compound-design-tokens/assets/web/icons\";\n\nimport { _t } from \"../../../languageHandler\";\nimport { CollapsibleButton } from \"./CollapsibleButton\";\nimport { type MenuProps } from \"../../structures/ContextMenu\";\nimport dis from \"../../../dispatcher/dispatcher\";\nimport ErrorDialog from \"../dialogs/ErrorDialog\";\nimport { LocationButton } from \"../location\";\nimport Modal from \"../../../Modal\";\nimport PollCreateDialog from \"../elements/PollCreateDialog\";\nimport { MatrixClientPeg } from \"../../../MatrixClientPeg\";\nimport ContentMessages from \"../../../ContentMessages\";\nimport MatrixClientContext from \"../../../contexts/MatrixClientContext\";\nimport { useDispatcher } from \"../../../hooks/useDispatcher\";\nimport { chromeFileInputFix } from \"../../../utils/BrowserWorkarounds\";\nimport IconizedContextMenu, { IconizedContextMenuOptionList } from \"../context_menus/IconizedContextMenu\";\nimport { EmojiButton } from \"./EmojiButton\";\nimport { filterBoolean } from \"../../../utils/arrays\";\nimport { useSettingValue } from \"../../../hooks/useSettings\";\nimport AccessibleButton, { type ButtonEvent } from \"../elements/AccessibleButton\";\nimport { useScopedRoomContext } from \"../../../contexts/ScopedRoomContext.tsx\";\nimport { Icon as StickersIcon } from \"../../../../res/img/element-icons/room/composer/sticker.svg\";\n\ninterface IProps {\n    addEmoji: (emoji: string) => boolean;\n    haveRecording: boolean;\n    isMenuOpen: boolean;\n    isStickerPickerOpen: boolean;\n    menuPosition?: MenuProps;\n    onRecordStartEndClick: () => void;\n    relation?: IEventRelation;\n    setStickerPickerOpen: (isStickerPickerOpen: boolean) => void;\n    showLocationButton: boolean;\n    showPollsButton: boolean;\n    showStickersButton: boolean;\n    toggleButtonMenu: () => void;\n    isRichTextEnabled: boolean;\n    onComposerModeClick: () => void;\n}\n\ntype OverflowMenuCloser = () => void;\nexport const OverflowMenuContext = createContext<OverflowMenuCloser | null>(null);\n\nconst MessageComposerButtons: React.FC<IProps> = (props: IProps) => {\n    const matrixClient = useContext(MatrixClientContext);\n    const { room, narrow } = useScopedRoomContext(\"room\", \"narrow\");\n\n    const isWysiwygLabEnabled = useSettingValue(\"feature_wysiwyg_composer\");\n\n    if (!matrixClient || !room || props.haveRecording) {\n        return null;\n    }\n\n    let mainButtons: ReactNode[];\n    let moreButtons: ReactNode[];\n    if (narrow) {\n        mainButtons = [\n            isWysiwygLabEnabled ? (\n                <ComposerModeButton\n                    key=\"composerModeButton\"\n                    isRichTextEnabled={props.isRichTextEnabled}\n                    onClick={props.onComposerModeClick}\n                />\n            ) : (\n                emojiButton(props)\n            ),\n        ];\n        moreButtons = [\n            uploadButton(), // props passed via UploadButtonContext\n            showStickersButton(props),\n            voiceRecordingButton(props, narrow),\n            props.showPollsButton ? pollButton(room, props.relation) : null,\n            showLocationButton(props, room, matrixClient),\n        ];\n    } else {\n        mainButtons = [\n            isWysiwygLabEnabled ? (\n                <ComposerModeButton\n                    key=\"composerModeButton\"\n                    isRichTextEnabled={props.isRichTextEnabled}\n                    onClick={props.onComposerModeClick}\n                />\n            ) : (\n                emojiButton(props)\n            ),\n            uploadButton(), // props passed via UploadButtonContext\n        ];\n        moreButtons = [\n            showStickersButton(props),\n            voiceRecordingButton(props, narrow),\n            props.showPollsButton ? pollButton(room, props.relation) : null,\n            showLocationButton(props, room, matrixClient),\n        ];\n    }\n\n    mainButtons = filterBoolean(mainButtons);\n    moreButtons = filterBoolean(moreButtons);\n\n    const moreOptionsClasses = classNames({\n        mx_MessageComposer_button: true,\n        mx_MessageComposer_buttonMenu: true,\n        mx_MessageComposer_closeButtonMenu: props.isMenuOpen,\n    });\n\n    return (\n        <UploadButtonContextProvider roomId={room.roomId} relation={props.relation}>\n            {mainButtons}\n            {moreButtons.length > 0 && (\n                <AccessibleButton\n                    className={moreOptionsClasses}\n                    onClick={props.toggleButtonMenu}\n                    title={_t(\"quick_settings|sidebar_settings\")}\n                >\n                    <OverflowHorizontalIcon />\n                </AccessibleButton>\n            )}\n            {props.isMenuOpen && (\n                <IconizedContextMenu\n                    onFinished={props.toggleButtonMenu}\n                    {...props.menuPosition}\n                    wrapperClassName=\"mx_MessageComposer_Menu\"\n                    compact={true}\n                >\n                    <OverflowMenuContext.Provider value={props.toggleButtonMenu}>\n                        <IconizedContextMenuOptionList>{moreButtons}</IconizedContextMenuOptionList>\n                    </OverflowMenuContext.Provider>\n                </IconizedContextMenu>\n            )}\n        </UploadButtonContextProvider>\n    );\n};\n\nfunction emojiButton(props: IProps): ReactElement {\n    return (\n        <EmojiButton\n            key=\"emoji_button\"\n            addEmoji={props.addEmoji}\n            menuPosition={props.menuPosition}\n            className=\"mx_MessageComposer_button\"\n        />\n    );\n}\n\nfunction uploadButton(): ReactElement {\n    return <UploadButton key=\"controls_upload\" />;\n}\n\ntype UploadButtonFn = () => void;\nexport const UploadButtonContext = createContext<UploadButtonFn | null>(null);\n\ninterface IUploadButtonProps {\n    roomId: string;\n    relation?: IEventRelation;\n    children: ReactNode;\n}\n\n// We put the file input outside the UploadButton component so that it doesn't get killed when the context menu closes.\nconst UploadButtonContextProvider: React.FC<IUploadButtonProps> = ({ roomId, relation, children }) => {\n    const cli = useContext(MatrixClientContext);\n    const roomContext = useScopedRoomContext(\"timelineRenderingType\", \"replyToEvent\");\n    const uploadInput = useRef<HTMLInputElement>(null);\n\n    const onUploadClick = (): void => {\n        if (cli?.isGuest()) {\n            dis.dispatch({ action: \"require_registration\" });\n            return;\n        }\n        uploadInput.current?.click();\n    };\n\n    useDispatcher(dis, (payload) => {\n        if (roomContext.timelineRenderingType === payload.context && payload.action === \"upload_file\") {\n            onUploadClick();\n        }\n    });\n\n    const onUploadFileInputChange = (ev: React.ChangeEvent<HTMLInputElement>): void => {\n        if (ev.target.files?.length === 0) return;\n\n        // Take a copy, so we can safely reset the value of the form control\n        ContentMessages.sharedInstance().sendContentListToRoom(\n            Array.from(ev.target.files!),\n            roomId,\n            relation,\n            roomContext.replyToEvent,\n            cli,\n            roomContext.timelineRenderingType,\n        );\n\n        // This is the onChange handler for a file form control, but we're\n        // not keeping any state, so reset the value of the form control\n        // to empty.\n        // NB. we need to set 'value': the 'files' property is immutable.\n        ev.target.value = \"\";\n    };\n\n    const uploadInputStyle = { display: \"none\" };\n    return (\n        <UploadButtonContext.Provider value={onUploadClick}>\n            {children}\n\n            <input\n                ref={uploadInput}\n                type=\"file\"\n                style={uploadInputStyle}\n                multiple\n                onClick={chromeFileInputFix}\n                onChange={onUploadFileInputChange}\n            />\n        </UploadButtonContext.Provider>\n    );\n};\n\n// Must be rendered within an UploadButtonContextProvider\nconst UploadButton: React.FC = () => {\n    const overflowMenuCloser = useContext(OverflowMenuContext);\n    const uploadButtonFn = useContext(UploadButtonContext);\n\n    const onClick = (): void => {\n        uploadButtonFn?.();\n        overflowMenuCloser?.(); // close overflow menu\n    };\n\n    return (\n        <CollapsibleButton className=\"mx_MessageComposer_button\" onClick={onClick} title={_t(\"common|attachment\")}>\n            <AttachmentIcon />\n        </CollapsibleButton>\n    );\n};\n\nfunction showStickersButton(props: IProps): ReactElement | null {\n    return props.showStickersButton ? (\n        <CollapsibleButton\n            id=\"stickersButton\"\n            key=\"controls_stickers\"\n            className=\"mx_MessageComposer_button\"\n            onClick={() => props.setStickerPickerOpen(!props.isStickerPickerOpen)}\n            title={props.isStickerPickerOpen ? _t(\"composer|close_sticker_picker\") : _t(\"common|sticker\")}\n        >\n            <StickersIcon />\n        </CollapsibleButton>\n    ) : null;\n}\n\nfunction voiceRecordingButton(props: IProps, narrow: boolean): ReactElement | null {\n    // XXX: recording UI does not work well in narrow mode, so hide for now\n    return narrow ? null : (\n        <CollapsibleButton\n            key=\"voice_message_send\"\n            className=\"mx_MessageComposer_button\"\n            onClick={props.onRecordStartEndClick}\n            title={_t(\"composer|voice_message_button\")}\n        >\n            <MicOnSolidIcon />\n        </CollapsibleButton>\n    );\n}\n\nfunction pollButton(room: Room, relation?: IEventRelation): ReactElement {\n    return <PollButton key=\"polls\" room={room} relation={relation} />;\n}\n\ninterface IPollButtonProps {\n    room: Room;\n    relation?: IEventRelation;\n}\n\nclass PollButton extends React.PureComponent<IPollButtonProps> {\n    public static contextType = OverflowMenuContext;\n    declare public context: React.ContextType<typeof OverflowMenuContext>;\n\n    private onCreateClick = (): void => {\n        this.context?.(); // close overflow menu\n        const canSend = this.props.room.currentState.maySendEvent(\n            M_POLL_START.name,\n            MatrixClientPeg.safeGet().getSafeUserId(),\n        );\n        if (!canSend) {\n            Modal.createDialog(ErrorDialog, {\n                title: _t(\"composer|poll_button_no_perms_title\"),\n                description: _t(\"composer|poll_button_no_perms_description\"),\n            });\n        } else {\n            const threadId =\n                this.props.relation?.rel_type === THREAD_RELATION_TYPE.name ? this.props.relation.event_id : undefined;\n\n            Modal.createDialog(\n                PollCreateDialog,\n                {\n                    room: this.props.room,\n                    threadId,\n                },\n                \"mx_CompoundDialog\",\n                false, // isPriorityModal\n                true, // isStaticModal\n            );\n        }\n    };\n\n    public render(): React.ReactNode {\n        // do not allow sending polls within threads at this time\n        if (this.props.relation?.rel_type === THREAD_RELATION_TYPE.name) return null;\n\n        return (\n            <CollapsibleButton\n                className=\"mx_MessageComposer_button\"\n                onClick={this.onCreateClick}\n                title={_t(\"composer|poll_button\")}\n            >\n                <PollsIcon />\n            </CollapsibleButton>\n        );\n    }\n}\n\nfunction showLocationButton(props: IProps, room: Room, matrixClient: MatrixClient): ReactElement | null {\n    const sender = room.getMember(matrixClient.getSafeUserId());\n\n    return props.showLocationButton && sender ? (\n        <LocationButton\n            key=\"location\"\n            roomId={room.roomId}\n            relation={props.relation}\n            sender={sender}\n            menuPosition={props.menuPosition}\n        />\n    ) : null;\n}\n\ninterface WysiwygToggleButtonProps {\n    isRichTextEnabled: boolean;\n    onClick: (ev: ButtonEvent) => void;\n}\n\nfunction ComposerModeButton({ isRichTextEnabled, onClick }: WysiwygToggleButtonProps): JSX.Element {\n    const title = isRichTextEnabled ? _t(\"composer|mode_plain\") : _t(\"composer|mode_rich_text\");\n\n    return (\n        <CollapsibleButton className=\"mx_MessageComposer_button\" onClick={onClick} title={title}>\n            <TextFormattingIcon />\n        </CollapsibleButton>\n    );\n}\n\nexport default MessageComposerButtons;\n"],"names":["MicOnSolidIcon","props","ref","xmlns","width","height","fill","viewBox","children","d","displayName","forwardRef","CollapsibleButton","_ref","title","className","inputRef","_objectWithoutProperties","_excluded","useContext","OverflowMenuContext","React","IconizedContextMenuOption","_extends","icon","label","AccessibleButton","ReactionIcon","EmojiButton","addEmoji","menuPosition","overflowMenuCloser","menuDisplayed","button","openMenu","closeMenu","useContextMenu","contextMenu","current","position","aboveLeftOf","getBoundingClientRect","onFinished","ContextMenu","managed","focusLock","EmojiPicker","onChoose","computedClassName","classNames","mx_EmojiButton_highlight","onClick","_t","AttachmentIcon","TextFormattingIcon","_mask","_path","_path2","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","SvgSticker","role","id","fillRule","clipRule","mask","ForwardRef","createContext","emojiButton","key","uploadButton","UploadButton","UploadButtonContext","UploadButtonContextProvider","roomId","relation","cli","MatrixClientContext","roomContext","useScopedRoomContext","uploadInput","useRef","onUploadClick","_uploadInput$current","isGuest","dis","dispatch","action","click","useDispatcher","payload","timelineRenderingType","context","Provider","value","type","style","display","multiple","chromeFileInputFix","onChange","ev","_ev$target$files","target","files","ContentMessages","sharedInstance","sendContentListToRoom","Array","from","replyToEvent","uploadButtonFn","showStickersButton","setStickerPickerOpen","isStickerPickerOpen","StickersIcon","voiceRecordingButton","narrow","onRecordStartEndClick","pollButton","room","PollButton","constructor","args","_defineProperty","_this$context","this","currentState","maySendEvent","M_POLL_START","name","MatrixClientPeg","safeGet","getSafeUserId","_this$props$relation","threadId","rel_type","THREAD_RELATION_TYPE","event_id","undefined","Modal","createDialog","PollCreateDialog","ErrorDialog","description","render","_this$props$relation2","onCreateClick","PollsIcon","showLocationButton","matrixClient","sender","getMember","LocationButton","ComposerModeButton","isRichTextEnabled","isWysiwygLabEnabled","useSettingValue","haveRecording","mainButtons","moreButtons","onComposerModeClick","showPollsButton","filterBoolean","moreOptionsClasses","mx_MessageComposer_button","mx_MessageComposer_buttonMenu","mx_MessageComposer_closeButtonMenu","isMenuOpen","toggleButtonMenu","OverflowHorizontalIcon","IconizedContextMenu","wrapperClassName","compact","IconizedContextMenuOptionList"],"sourceRoot":""}